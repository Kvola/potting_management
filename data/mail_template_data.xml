<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Daily Report Email Template -->
        <record id="mail_template_potting_daily_report" model="mail.template">
            <field name="name">Rapport journalier d'empotage</field>
            <field name="model_id" ref="potting_management.model_potting_transit_order"/>
            <field name="subject">Rapport journalier d'empotage - ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email_formatted) | safe}</field>
            <field name="email_to">${ctx.get('recipient_email', '')}</field>
            <field name="email_cc">${ctx.get('cc_emails', '')}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Bonjour,
        <br/><br/>
        Veuillez trouver ci-joint le rapport journalier d'empotage pour l'Ordre de Transit <strong>${object.name}</strong>.
        <br/><br/>
        <strong>Résumé :</strong>
        <ul>
            <li>Client : ${object.customer_id.name}</li>
            <li>Destinataire : ${object.consignee_id.name}</li>
            <li>Produit : ${dict(object._fields['product_type'].selection).get(object.product_type, '')}</li>
            <li>Tonnage : ${object.tonnage} T</li>
            <li>Progression : ${round(object.progress_percentage, 1)}%</li>
            <li>Lots empotés : ${object.potted_lot_count} / ${object.lot_count}</li>
        </ul>
        <br/>
        Cordialement,
        <br/>
        ${user.name}
    </p>
</div>
            </field>
            <field name="lang">${object.customer_id.lang}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <!-- Summary Report Email Template -->
        <record id="mail_template_potting_summary_report" model="mail.template">
            <field name="name">Rapport de synthèse empotage</field>
            <field name="model_id" ref="potting_management.model_potting_customer_order"/>
            <field name="subject">Rapport de synthèse - Commande ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email_formatted) | safe}</field>
            <field name="email_to">${ctx.get('recipient_email', '')}</field>
            <field name="email_cc">${ctx.get('cc_emails', '')}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Bonjour,
        <br/><br/>
        Veuillez trouver ci-joint le rapport de synthèse pour la commande <strong>${object.name}</strong>.
        <br/><br/>
        <strong>Résumé :</strong>
        <ul>
            <li>Client : ${object.customer_id.name}</li>
            <li>Date de commande : ${object.date_order}</li>
            <li>Nombre d'OT : ${object.transit_order_count}</li>
            <li>Tonnage total : ${object.total_tonnage} T</li>
            <li>État : ${dict(object._fields['state'].selection).get(object.state, '')}</li>
        </ul>
        <br/>
        Cordialement,
        <br/>
        ${user.name}
    </p>
</div>
            </field>
            <field name="lang">${object.customer_id.lang}</field>
            <field name="auto_delete" eval="True"/>
        </record>
    </data>
</odoo>
