<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vue de configuration pour la gestion des empotages -->
    <record id="res_config_settings_view_form_potting" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.inherit.potting</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="base.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="inside">
                <app data-string="Gestion des Empotages" string="Gestion des Empotages" name="potting_management">
                    
                    <!-- Configuration G√©n√©rale -->
                    <block title="üë• Configuration G√©n√©rale" name="potting_general_config">
                        <setting id="potting_default_customer_setting" 
                                 title="Client par d√©faut" 
                                 help="Client qui sera s√©lectionn√© par d√©faut lors de la cr√©ation d'une commande"
                                 documentation="/potting_management/static/description/help.html#default-customer">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Client" for="potting_default_customer_id" class="col-lg-3 o_light_label"/>
                                    <field name="potting_default_customer_id" 
                                           placeholder="S√©lectionner un client..."
                                           options="{'no_create': True}"
                                           class="col-lg-6"/>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_cc_partners_setting" 
                                 title="Destinataires en copie par d√©faut" 
                                 help="Liste des personnes √† mettre en copie par d√©faut lors de l'envoi des rapports">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Destinataires CC" for="potting_default_cc_partner_ids" class="col-lg-3 o_light_label"/>
                                    <field name="potting_default_cc_partner_ids" 
                                           widget="many2many_tags"
                                           placeholder="Ajouter des destinataires..."
                                           options="{'color_field': 'color', 'no_create': True}"
                                           class="col-lg-6"/>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                    <!-- Tonnage Maximum - Masse de cacao -->
                    <block title="‚öñÔ∏è Tonnage Maximum par Lot" name="potting_tonnage_config">
                        <setting id="potting_max_production_setting" 
                                 title="üè≠ Production maximum par ligne" 
                                 help="Limite le tonnage qu'un op√©rateur peut saisir pour une seule ligne de production">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Max par ligne (T)" 
                                           for="potting_max_daily_production" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_max_daily_production" class="col-lg-2"/>
                                    <span class="col-lg-1 text-muted">tonnes</span>
                                </div>
                                <div class="row mt-1">
                                    <div class="col-12">
                                        <small class="text-muted fst-italic">
                                            <i class="fa fa-info-circle me-1"/>Cette valeur limite le tonnage maximum qu'un op√©rateur peut saisir pour une seule ligne de production
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_tonnage_mass_setting" 
                                 title="üç´ Masse de cacao" 
                                 help="Tonnage maximum par lot pour la Masse de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Standard (T)" 
                                           for="potting_max_tonnage_cocoa_mass" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_max_tonnage_cocoa_mass" class="col-lg-2"/>
                                    <span class="col-lg-1 text-muted">tonnes</span>
                                </div>
                                <div class="row mt-2">
                                    <label string="Alternatif (T)" 
                                           for="potting_max_tonnage_cocoa_mass_alt" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_max_tonnage_cocoa_mass_alt" class="col-lg-2"/>
                                    <span class="col-lg-1 text-muted">tonnes</span>
                                </div>
                                <div class="row mt-1">
                                    <div class="col-12">
                                        <small class="text-muted fst-italic">
                                            <i class="fa fa-info-circle me-1"/>Le tonnage alternatif est utilis√© pour certains conteneurs sp√©cifiques
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_tonnage_butter_setting" 
                                 title="üßà Beurre de cacao" 
                                 help="Tonnage maximum par lot pour le Beurre de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Maximum (T)" 
                                           for="potting_max_tonnage_cocoa_butter" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_max_tonnage_cocoa_butter" class="col-lg-2"/>
                                    <span class="col-lg-1 text-muted">tonnes</span>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_tonnage_cake_setting" 
                                 title="üç™ Cake (Tourteau) de cacao" 
                                 help="Tonnage maximum par lot pour le Cake de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Maximum (T)" 
                                           for="potting_max_tonnage_cocoa_cake" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_max_tonnage_cocoa_cake" class="col-lg-2"/>
                                    <span class="col-lg-1 text-muted">tonnes</span>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_tonnage_powder_setting" 
                                 title="‚òï Poudre de cacao" 
                                 help="Tonnage maximum par lot pour la Poudre de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Maximum (T)" 
                                           for="potting_max_tonnage_cocoa_powder" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_max_tonnage_cocoa_powder" class="col-lg-2"/>
                                    <span class="col-lg-1 text-muted">tonnes</span>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                    <!-- Configuration Campagne et Num√©rotation -->
                    <block title="üìÖ Campagne &amp; Num√©rotation" name="potting_sequence_config">
                        <setting id="potting_campaign_setting" 
                                 title="Campagne Caf√©-Cacao" 
                                 help="Configuration de la p√©riode de campagne utilis√©e dans la num√©rotation des OT">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="P√©riode campagne" 
                                           for="potting_campaign_year" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_campaign_year" class="col-lg-3" placeholder="2025-2026"/>
                                    <span class="col-lg-4 text-muted">Format: AAAA-AAAA (ex: 2025-2026)</span>
                                </div>
                                <div class="row mt-1">
                                    <div class="col-12">
                                        <small class="text-muted fst-italic">
                                            <i class="fa fa-info-circle me-1"/>Les num√©ros d'OT sont g√©n√©r√©s au format: NNNN/AAAA-AAAA-XX (ex: 3734/2025-2026-MA pour Masse)
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_lot_sequence_setting" 
                                 title="Num√©rotation des Lots" 
                                 help="Configuration de la num√©rotation automatique des lots">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Num√©ro initial" 
                                           for="potting_lot_initial_number" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_lot_initial_number" class="col-lg-2"/>
                                </div>
                                <div class="row mt-1">
                                    <div class="col-12">
                                        <small class="text-muted fst-italic">
                                            <i class="fa fa-info-circle me-1"/>Format: [Pr√©fixe][Num√©ro] ‚Üí ex: M10001 (Masse), B10001 (Beurre), T10001 (Tourteau), P10001 (Poudre)
                                        </small>
                                    </div>
                                </div>
                                <div class="row mt-1">
                                    <div class="col-12">
                                        <small class="text-warning fst-italic">
                                            <i class="fa fa-exclamation-triangle me-1"/>Modifier le num√©ro initial mettra √† jour la s√©quence. Le prochain lot cr√©√© utilisera ce num√©ro.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                    <!-- Pr√©fixes des Lots par Type de Produit -->
                    <block title="üè∑Ô∏è Pr√©fixes des Lots par Produit" name="potting_prefix_config">
                        <setting id="potting_prefix_mass_setting" 
                                 title="üç´ Pr√©fixe - Masse de cacao" 
                                 help="Pr√©fixe pour les num√©ros de lot de Masse de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Pr√©fixe" 
                                           for="potting_lot_prefix_cocoa_mass" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_lot_prefix_cocoa_mass" class="col-lg-2" placeholder="M"/>
                                    <span class="col-lg-4 text-muted">‚Üí Ex: <strong>M</strong>10001</span>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_prefix_butter_setting" 
                                 title="üßà Pr√©fixe - Beurre de cacao" 
                                 help="Pr√©fixe pour les num√©ros de lot de Beurre de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Pr√©fixe" 
                                           for="potting_lot_prefix_cocoa_butter" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_lot_prefix_cocoa_butter" class="col-lg-2" placeholder="B"/>
                                    <span class="col-lg-4 text-muted">‚Üí Ex: <strong>B</strong>10001</span>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_prefix_cake_setting" 
                                 title="üç™ Pr√©fixe - Cake (Tourteau) de cacao" 
                                 help="Pr√©fixe pour les num√©ros de lot de Cake/Tourteau de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Pr√©fixe" 
                                           for="potting_lot_prefix_cocoa_cake" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_lot_prefix_cocoa_cake" class="col-lg-2" placeholder="T"/>
                                    <span class="col-lg-4 text-muted">‚Üí Ex: <strong>T</strong>10001</span>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="potting_prefix_powder_setting" 
                                 title="‚òï Pr√©fixe - Poudre de cacao" 
                                 help="Pr√©fixe pour les num√©ros de lot de Poudre de cacao">
                            <div class="content-group">
                                <div class="row mt-2">
                                    <label string="Pr√©fixe" 
                                           for="potting_lot_prefix_cocoa_powder" 
                                           class="col-lg-3 o_light_label"/>
                                    <field name="potting_lot_prefix_cocoa_powder" class="col-lg-2" placeholder="P"/>
                                    <span class="col-lg-4 text-muted">‚Üí Ex: <strong>P</strong>10001</span>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                    <!-- Bloc Informations -->
                    <block title="üìò Aide &amp; Documentation" name="potting_help">
                        <div class="row">
                            <div class="col-12">
                                <div class="alert alert-info border-0 shadow-sm" role="alert">
                                    <h5 class="alert-heading fw-bold">
                                        <i class="fa fa-book me-2"/>Information sur la num√©rotation
                                    </h5>
                                    <hr class="my-2"/>
                                    <p class="mb-2"><strong>Format des num√©ros d'OT:</strong> NNNN/AAAA-AAAA-XX</p>
                                    <ul class="mb-2 ps-3">
                                        <li><strong>NNNN:</strong> Num√©ro s√©quentiel</li>
                                        <li><strong>AAAA-AAAA:</strong> P√©riode de campagne (ex: 2025-2026)</li>
                                        <li><strong>XX:</strong> Code produit (MA=Masse, BE=Beurre, TO=Tourteau, PO=Poudre)</li>
                                    </ul>
                                    <p class="mb-1"><em>Exemple: 3734/2025-2026-MA</em></p>
                                    <hr class="my-2"/>
                                    <p class="mb-2"><strong>Format des num√©ros de lots:</strong> X#####</p>
                                    <ul class="mb-0 ps-3">
                                        <li><strong>M</strong>10001 ‚Üí Masse de cacao</li>
                                        <li><strong>B</strong>10001 ‚Üí Beurre de cacao</li>
                                        <li><strong>T</strong>10001 ‚Üí Tourteau (Cake) de cacao</li>
                                        <li><strong>P</strong>10001 ‚Üí Poudre de cacao</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </block>
                    
                </app>
            </xpath>
        </field>
    </record>
    
    <!-- Action pour ouvrir les settings -->
    <record id="action_potting_config_settings" model="ir.actions.act_window">
        <field name="name">Configuration Empotages</field>
        <field name="res_model">res.config.settings</field>
        <field name="view_mode">form</field>
        <field name="target">inline</field>
        <field name="context">{'module': 'potting_management'}</field>
    </record>
    
</odoo>